---
phase: 09-component-library
plan: 01
type: execute
---

<objective>
Build foundational UI components (Button, Input) using Radix UI primitives with design tokens from Phase 8.

Purpose: Establish component library foundation with accessible, reusable primitives that demonstrate the compound component pattern and design token integration.
Output: Button and Input components with variants, documented in Storybook with accessibility features.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/09-component-library/09-RESEARCH.md
@.planning/phases/08-design-system-foundation/08-02-SUMMARY.md
@frontend/src/styles/tokens/colors.css
@frontend/src/styles/tokens/typography.css
@frontend/src/styles/tokens/spacing.css

**Tech stack available (from Phase 8):**
- React 19.2.0
- TypeScript 5.9.3
- Storybook 10.1.11
- Design tokens: OKLCH colors, 1.25 modular scale typography, spacing scale

**Established patterns:**
- Storybook 10 imports from 'storybook/*'
- TSX story files with functional components
- Design token CSS variables for styling
- Theme decorator for light/dark testing

**Constraining decisions:**
- Phase 8: Design tokens established (use CSS variables, not hardcoded values)
- Phase 8: Storybook configured (document all components)
- Phase 8: Border radius reduced (~33% less rounded per user feedback)

**From RESEARCH.md:**
- Standard stack: Radix UI Primitives (unified `radix-ui` package), clsx for className joining
- Don't hand-roll: Focus management, keyboard navigation, ARIA attributes
- Architecture pattern: Compound components with Slot pattern (`asChild` prop)
- Common pitfall: Using ARIA instead of native HTML elements
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install Radix UI and supporting libraries</name>
  <files>frontend/package.json, frontend/package-lock.json</files>
  <action>
    Install Radix UI unified package and supporting libraries:
    ```bash
    cd frontend && npm install radix-ui @radix-ui/react-icons clsx
    ```

    Use `radix-ui` unified package (NOT individual `@radix-ui/react-*` packages) - it's tree-shakeable and prevents version conflicts. Install clsx for conditional className joining with design tokens.

    Verify installation by checking package.json dependencies include:
    - radix-ui (latest)
    - @radix-ui/react-icons (1.3.x)
    - clsx (2.x)
  </action>
  <verify>
    ```bash
    cd frontend && cat package.json | grep -E "(radix-ui|clsx)"
    ```
    All three packages listed in dependencies.
  </verify>
  <done>Radix UI, React Icons, and clsx installed. package.json and package-lock.json updated. No errors.</done>
</task>

<task type="auto">
  <name>Task 2: Create Button and Input components with design tokens</name>
  <files>frontend/src/components/ui/Button/Button.tsx, frontend/src/components/ui/Button/index.ts, frontend/src/components/ui/Input/Input.tsx, frontend/src/components/ui/Input/index.ts</files>
  <action>
    Create `frontend/src/components/ui/` directory structure for base components.

    **Button component:**
    - Use Slot pattern from `@radix-ui/react-slot` for polymorphic `asChild` prop
    - Variants: primary, secondary, ghost (via `variant` prop)
    - Sizes: sm, md, lg (via `size` prop)
    - Forward ref properly with TypeScript types: `React.forwardRef<HTMLButtonElement, ButtonProps>`
    - Style with clsx and CSS variables from design tokens (--color-*, --font-size-*, --spacing-*, --border-radius-*)
    - Use native `<button>` element (NOT div with role="button")
    - Apply focus-visible styles (2px ring offset), disabled styles (opacity-50, pointer-events-none)
    - Do NOT hardcode colors - use CSS variables from Phase 8 tokens

    **Input component:**
    - Wrap native `<input>` element
    - Props: error (boolean), helperText (string), label (string)
    - Style with design tokens (colors, spacing, typography)
    - Include error state styling (red border from --color-risk-high)
    - Accessibility: Link label with input via htmlFor/id, error message with aria-describedby
    - Forward ref: `React.forwardRef<HTMLInputElement, InputProps>`

    Create barrel exports (index.ts) for each component.

    Example Button API:
    ```tsx
    <Button variant="primary" size="md">Click me</Button>
    <Button variant="ghost" asChild><a href="/dashboard">Go</a></Button>
    ```

    Example Input API:
    ```tsx
    <Input label="Email" error={hasError} helperText="Invalid email" />
    ```
  </action>
  <verify>
    ```bash
    cd frontend && npm run build
    ```
    TypeScript compiles without errors. Both components export correctly.
  </verify>
  <done>Button and Input components created in ui/ directory. Both use design tokens, forward refs properly, export via barrel files. Build passes.</done>
</task>

<task type="auto">
  <name>Task 3: Add Storybook stories for Button and Input</name>
  <files>frontend/src/stories/Components/Button.stories.tsx, frontend/src/stories/Components/Input.stories.tsx</files>
  <action>
    Create `frontend/src/stories/Components/` directory for component documentation.

    **Button.stories.tsx:**
    - Import Button from `@/components/ui/Button`
    - Create meta with title: 'Components/Button'
    - Stories: Primary, Secondary, Ghost, Sizes (sm/md/lg), AsChild (with <a> tag), Disabled
    - Use theme decorator (inherited from preview.tsx)
    - Show accessibility: focus-visible ring, keyboard activation

    **Input.stories.tsx:**
    - Import Input from `@/components/ui/Input`
    - Create meta with title: 'Components/Input'
    - Stories: Default, WithLabel, WithError, Disabled
    - Demonstrate error state with red border and helper text
    - Show label association (click label focuses input)

    Both stories should:
    - Use TypeScript with proper types
    - Follow Storybook 10 API (Meta, StoryObj types)
    - Include controls for interactive prop testing
    - Demonstrate design token usage
  </action>
  <verify>
    ```bash
    cd frontend && npm run storybook
    ```
    Storybook starts without errors. Visit localhost:6006, verify Components/Button and Components/Input appear in sidebar with all stories rendering.
  </verify>
  <done>Button and Input stories created. Both documented in Storybook with variants, states, and accessibility demonstrations. Storybook runs without errors.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without TypeScript errors
- [ ] `npm run storybook` starts successfully
- [ ] Button component has 3 variants (primary, secondary, ghost) and 3 sizes
- [ ] Input component has label, error state, and helper text support
- [ ] Both components use design tokens (CSS variables), not hardcoded values
- [ ] Storybook shows Components section with Button and Input stories
- [ ] Focus-visible rings appear on keyboard navigation
</verification>

<success_criteria>

- All tasks completed
- Radix UI installed (unified package)
- Button and Input components created with design tokens
- Both components properly forward refs
- Storybook stories demonstrate variants and accessibility
- No TypeScript errors or build failures
- Foundation established for remaining components (Plan 09-02)
</success_criteria>

<output>
After completion, create `.planning/phases/09-component-library/09-01-SUMMARY.md`:

# Phase 9 Plan 1: Foundation + Form Components Summary

**Button and Input components built with Radix UI and Phase 8 design tokens**

## Accomplishments

- Radix UI unified package installed
- Button component with Slot pattern (asChild support)
- Button variants: primary, secondary, ghost
- Button sizes: sm, md, lg
- Input component with label and error states
- Proper ref forwarding for both components
- Storybook documentation with 10+ stories
- Accessibility: focus rings, keyboard nav, ARIA labels

## Files Created/Modified

- `frontend/package.json` - Added radix-ui, @radix-ui/react-icons, clsx
- `frontend/src/components/ui/Button/Button.tsx` - Polymorphic button with Slot
- `frontend/src/components/ui/Button/index.ts` - Barrel export
- `frontend/src/components/ui/Input/Input.tsx` - Input with label and error
- `frontend/src/components/ui/Input/index.ts` - Barrel export
- `frontend/src/stories/Components/Button.stories.tsx` - 6+ Button stories
- `frontend/src/stories/Components/Input.stories.tsx` - 4+ Input stories

## Decisions Made

- Used unified `radix-ui` package for tree-shaking and version consistency
- Established `src/components/ui/` directory for base component library
- Button uses Slot pattern for polymorphic behavior (`asChild` prop)
- Input combines label + input + error in single component for easier use
- All styling via CSS variables from Phase 8 tokens (no hardcoded values)

## Issues Encountered

[None expected - straightforward component creation with established patterns]

## Next Step

Ready for 09-02-PLAN.md (Card, Modal, Table components)
</output>
