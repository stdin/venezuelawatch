---
phase: 11-entity-pages-redesign
plan: 03
type: execute
---

<objective>
Rebuild EntityProfile component with Mantine Card, Alert, and Text components.

Purpose: Replace custom CSS profile layout with Mantine's professional card and alert components, complete Phase 11 Entity Pages redesign.
Output: EntityProfile with Mantine Card sections for info/sanctions/timeline, Mantine Alert for sanctions warning, no custom CSS, Phase 11 complete.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-entity-pages-redesign/11-02-SUMMARY.md
@.planning/phases/10-dashboard-redesign/10-04-SUMMARY.md
@.planning/phases/06-entity-watch/06-04-SUMMARY.md
@frontend/src/components/EntityProfile.tsx
@frontend/src/components/EntityProfile.css

**Tech stack available:**
- Mantine UI v8.3.11: Card, Alert, Badge, Text, Title, Stack, Group, Divider, List
- date-fns for date formatting

**Established patterns:**
- Phase 10: Mantine Card with padding="md" and withBorder for sections
- Phase 10: Mantine Title order={4} for section headers
- Phase 10: Stack for vertical layout, Group for horizontal
- Phase 6: Sanctions warning banner (red background, bold text)
- Phase 6: Entity type badge color-coding

**Constraining decisions:**
- Phase 9: Use Mantine components for all UI
- Phase 10: Mantine Card wrapper pattern for sections
- Phase 6: Sanctions warning banner must be prominent
- Phase 6: Entity profile shows type, mention count, sanctions status, risk metrics, timeline

**From Phase 6 Summary:**
- Sanctions warning banner in red with bold text
- Entity type badges with color-coding
- Profile sections: basic info, sanctions status, risk metrics, mention timeline
- Timeline shows recent mentions with dates
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rebuild EntityProfile with Mantine components</name>
  <files>frontend/src/components/EntityProfile.tsx</files>
  <action>Rebuild EntityProfile using Mantine components. Import Card, Alert, Badge, Text, Title, Stack, Group, Divider, List from @mantine/core. If no entity selected (entity prop is null), return Card with Text c="dimmed" ta="center" saying "Select an entity to view profile". If entity exists: Wrap entire profile in Stack gap="md". First element: Title order={3} with entity.name. If entity.is_sanctioned, show Alert color="red" variant="filled" title="Sanctioned Entity" with text "This entity appears on sanctions lists". Below that, Card with padding="md" withBorder for basic info section: Title order={4} "Overview", Group with entity type Badge (same color-coding as leaderboard: PERSON=blue, ORG=grape, GOV=red, LOCATION=green), Text showing mention_count "Mentions: {count}". Add another Card for risk metrics section: Title order={4} "Risk Intelligence", Stack with Text items showing latest_risk_score and sanctioned_event_count. Add another Card for timeline section: Title order={4} "Recent Mentions", List with entity.recent_mentions mapped to List.Item showing mention date (formatted with date-fns format) and source. If no entity.recent_mentions, show Text c="dimmed" "No recent mentions". Remove all custom CSS classes and EntityProfile.css import.</action>
  <verify>npm run dev starts, EntityProfile shows Mantine Cards with sections, sanctions Alert appears for sanctioned entities</verify>
  <done>EntityProfile rebuilt with Mantine Card/Alert/Badge/Text/Title/Stack/Group, sanctions warning uses Mantine Alert, entity info in card sections, no custom CSS classes</done>
</task>

<task type="auto">
  <name>Task 2: Delete EntityProfile.css</name>
  <files>frontend/src/components/EntityProfile.css</files>
  <action>Delete the EntityProfile.css file completely. Remove the import './EntityProfile.css' line from EntityProfile.tsx. Mantine components provide all styling.</action>
  <verify>npm run dev starts, EntityProfile renders with Mantine styling, no console errors</verify>
  <done>EntityProfile.css deleted, import removed, Mantine components render properly</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Redesigned Entity Pages with Mantine Grid layout, SegmentedControl for metrics, Card-based leaderboard with skeleton loading, and Card-based entity profiles with Alert for sanctions warnings</what-built>
  <how-to-verify>
    1. Run: npm run dev (from frontend directory)
    2. Visit: http://localhost:5173/entities
    3. Desktop view (>992px):
       - Verify 2-column layout (leaderboard left ~40%, profile right ~60%)
       - Verify SegmentedControl at top with 3 metrics (Most Mentioned, Highest Risk, Recently Sanctioned)
       - Verify skeleton cards show during initial load
       - Verify entity list items are Mantine Cards with borders
       - Verify rank badges (gray circle with # prefix) and entity type badges (color-coded)
       - Click entity: verify profile appears on right with Mantine Cards
       - If sanctioned entity: verify red Alert banner at top of profile
       - Verify profile sections (Overview, Risk Intelligence, Recent Mentions) in separate Cards
    4. Switch metrics:
       - Click "Highest Risk" - verify list updates
       - Click "Recently Sanctioned" - verify list updates
       - Click "Most Mentioned" - verify list updates
    5. Tablet view (768px):
       - Verify layout adapts (columns resize or stack)
    6. Mobile view (375px):
       - Verify single column stacked layout
       - Verify SegmentedControl still functional
    7. Check console: No errors or warnings
  </how-to-verify>
  <resume-signal>Type "approved" to mark Phase 11 complete, or describe any visual/UX issues</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run dev starts without errors
- [ ] EntityProfile uses Mantine Card for sections
- [ ] Sanctions Alert appears for sanctioned entities (red, filled variant)
- [ ] Entity type badges color-coded
- [ ] Profile sections organized in Cards (Overview, Risk Intelligence, Recent Mentions)
- [ ] EntityProfile.css deleted
- [ ] Human verification checkpoint passed
- [ ] No console errors
</verification>

<success_criteria>

- EntityProfile rebuilt with Mantine components
- Sanctions warning uses Mantine Alert
- Profile sections organized in Mantine Cards
- EntityProfile.css deleted
- Human verification confirms UX quality
- **Phase 11 complete:** Entity Pages fully redesigned
- No TypeScript errors
  </success_criteria>

<output>
After completion, create `.planning/phases/11-entity-pages-redesign/11-03-SUMMARY.md`:

# Phase 11 Plan 3: EntityProfile Redesign Summary

**[Substantive one-liner - what shipped]**

## Accomplishments

- [Key outcomes]

## Files Created/Modified

- `frontend/src/components/EntityProfile.tsx` - Description
- `frontend/src/components/EntityProfile.css` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

**Phase 11 Complete** - Entity Pages redesigned with Mantine Grid, SegmentedControl, Card-based leaderboard with skeleton loading, and Card-based profiles with Alert warnings

Ready for: Phase 12 - Chat Interface Polish
</output>
