---
phase: 11-entity-pages-redesign
plan: 01
type: execute
---

<objective>
Rebuild Entities page layout with Mantine Grid and metric toggle UI with Mantine SegmentedControl.

Purpose: Replace custom CSS layout and metric toggle buttons with Mantine's professional components, following Phase 10 Dashboard redesign patterns.
Output: Entities page with Mantine Grid responsive layout (2-column desktop, stacked mobile) and Mantine SegmentedControl for metric switching.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-dashboard-redesign/10-04-SUMMARY.md
@.planning/phases/10-dashboard-redesign/10-01-SUMMARY.md
@.planning/phases/09-component-library/09-02-SUMMARY.md
@.planning/phases/06-entity-watch/06-04-SUMMARY.md
@frontend/src/pages/Entities.tsx
@frontend/src/pages/Entities.css

**Tech stack available:**
- Mantine UI v8.3.11: Container, Grid, SegmentedControl, Title, Text, Stack
- @tanstack/react-virtual for virtualized lists
- React Router for navigation

**Established patterns:**
- Phase 10: Mantine Grid responsive layout with span={{ base: 12, md: 6 }} for breakpoints
- Phase 10: Container fluid for full-width layouts
- Phase 10: Mantine Card wrapper pattern
- Phase 6: Split-view layout (40% leaderboard, 60% profile)
- Phase 6: Metric toggle pattern (mentions, risk, sanctions)

**Constraining decisions:**
- Phase 9: Use Mantine components for all UI (no custom inputs/buttons)
- Phase 10: Remove all custom CSS, use Mantine styling
- Phase 6: Maintain split-view layout and metric toggle functionality

**From Phase 6:**
- 3 metrics: mentions (Most Mentioned), risk (Highest Risk), sanctions (Recently Sanctioned)
- Split-view: 40% leaderboard left, 60% profile right
- Virtualized leaderboard with @tanstack/react-virtual
</context>

<tasks>

<task type="auto">
  <name>Task 1: Migrate Entities page layout to Mantine Grid</name>
  <files>frontend/src/pages/Entities.tsx</files>
  <action>Rebuild Entities page with Mantine Container and Grid. Import Container, Grid, SegmentedControl, Title from @mantine/core. Replace custom div.entities-container with Container fluid. Use Grid with two Grid.Col: first column span={{ base: 12, md: 5 }} for leaderboard (slightly wider than 40%), second column span={{ base: 12, md: 7 }} for profile. Replace div.entities-header custom HTML with Stack containing Title order={2} "Entity Watch" and SegmentedControl for metrics. SegmentedControl data should be: [{value: 'mentions', label: 'Most Mentioned'}, {value: 'risk', label: 'Highest Risk'}, {value: 'sanctions', label: 'Recently Sanctioned'}]. Use value={selectedMetric} and onChange={setSelectedMetric}. Remove all className references to custom CSS (entities-container, entities-panel, entities-header, entities-title, metric-toggles, metric-toggle, metric-toggle-active). Keep all data fetching logic unchanged (useEffect, api calls, state management). Do NOT remove Entities.css import yet (will be deleted in next commit after verification).</action>
  <verify>npm run dev starts, Entities page renders with Mantine Grid layout and SegmentedControl, metric switching works</verify>
  <done>Entities page uses Mantine Container + Grid for layout, SegmentedControl for metric switching, no custom CSS classes in JSX (except loading/error/empty states which will be migrated in next plans), data fetching logic preserved</done>
</task>

<task type="auto">
  <name>Task 2: Delete Entities.css custom styles</name>
  <files>frontend/src/pages/Entities.css</files>
  <action>Delete the Entities.css file completely. Remove the import './Entities.css' line from Entities.tsx. The Mantine components provide all necessary styling.</action>
  <verify>npm run dev starts without errors, Entities page still renders correctly with Mantine styling</verify>
  <done>Entities.css deleted, no import reference in Entities.tsx, Mantine Grid layout and SegmentedControl render properly</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run dev starts without errors
- [ ] Entities page uses Mantine Container and Grid
- [ ] SegmentedControl shows 3 metric options (mentions, risk, sanctions)
- [ ] Metric switching triggers data re-fetch
- [ ] Layout responds to screen size (2-column desktop, stacked mobile)
- [ ] Entities.css deleted and no longer imported
- [ ] No console errors
- [ ] EntityLeaderboard and EntityProfile still render (unchanged)
</verification>

<success_criteria>

- Entities page layout migrated to Mantine Grid
- SegmentedControl replaces custom metric toggle buttons
- Entities.css deleted
- All metric switching functionality preserved
- Layout responsive (2-column desktop, stacked mobile)
- No TypeScript errors
  </success_criteria>

<output>
After completion, create `.planning/phases/11-entity-pages-redesign/11-01-SUMMARY.md`:

# Phase 11 Plan 1: Layout & Metric Toggles Summary

**[Substantive one-liner - what shipped]**

## Accomplishments

- [Key outcomes]

## Files Created/Modified

- `frontend/src/pages/Entities.tsx` - Description
- `frontend/src/pages/Entities.css` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 11-02-PLAN.md (EntityLeaderboard Redesign)
</output>
