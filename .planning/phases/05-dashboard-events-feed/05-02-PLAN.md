---
phase: 05-dashboard-events-feed
plan: 02
type: execute
---

<objective>
Build split-view dashboard layout with virtualized event list displaying risk-prioritized events.

Purpose: Create the core dashboard UI with efficient rendering for thousands of events.
Output: Working split-view layout with event list (left), detail panel placeholder (right), virtualized scrolling, event cards with moderate information density.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
@~/.claude/get-shit-done/references/checkpoints.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/05-dashboard-events-feed/05-CONTEXT.md
@.planning/phases/05-dashboard-events-feed/05-01-SUMMARY.md
@frontend/src/lib/types.ts
@frontend/src/hooks/useRiskEvents.ts
@frontend/src/App.tsx

**Tech stack available from Plan 1:**
- RiskEvent interface, useRiskEvents hook
- api.getRiskEvents() method
- TypeScript types for all data structures

**Established patterns:**
- React 19 functional components with TypeScript
- Components in frontend/src/components/
- CSS modules or inline styles (project uses basic CSS)

**From CONTEXT.md vision:**
- Split view: event list (left) + detail panel (right)
- Moderate card density: title, risk score, severity, timestamp, short summary, source, sentiment
- Virtual scrolling for handling thousands of events
- Linear/modern SaaS aesthetic: clean, minimal, whitespace
- Desktop-first (mobile-readable secondary)
- Risk-prioritized: highest risk at top
</context>

<tasks>

<task type="auto">
  <name>Task 1: Install TanStack Virtual for virtualized scrolling</name>
  <files>frontend/package.json</files>
  <action>
Install @tanstack/react-virtual for efficient list virtualization:

```bash
cd frontend && npm install @tanstack/react-virtual
```

This library provides useVirtualizer hook for rendering only visible items in large lists. No other dependencies needed.
  </action>
  <verify>grep "@tanstack/react-virtual" frontend/package.json shows installation</verify>
  <done>Package installed in dependencies</done>
</task>

<task type="auto">
  <name>Task 2: Create Dashboard page component with split-view layout</name>
  <files>frontend/src/pages/Dashboard.tsx, frontend/src/pages/Dashboard.css</files>
  <action>
Create Dashboard page component:

**Dashboard.tsx:**
- Functional component using useRiskEvents hook (no filters for now, that's Plan 3)
- Split-view layout: flex container with two panels
  - Left panel (60% width): scrollable container for event list
  - Right panel (40% width): detail panel (placeholder div with "Select an event" text)
- State: selectedEventId (string | null) for tracking which event is selected
- Pass events to EventList component (create in next task)
- Pass selectedEventId and onSelectEvent handler to EventList
- When event selected, show "Event details will appear here" in right panel (full detail is Plan 4)

**Dashboard.css:**
- .dashboard-container: display flex, height 100vh, overflow hidden
- .events-panel: flex 0 0 60%, overflow hidden, border-right
- .detail-panel: flex 0 0 40%, padding, overflow auto
- Clean, minimal styling consistent with Linear inspiration
- Use CSS variables for colors: --risk-critical (red), --risk-high (orange), --risk-medium (yellow), --risk-low (blue), --risk-minimal (green)

Loading states: show "Loading events..." while loading. Error states: show error message if error.
  </action>
  <verify>Dashboard component renders without errors when imported in App.tsx</verify>
  <done>Split-view layout implemented, responsive, handles loading/error states</done>
</task>

<task type="auto">
  <name>Task 3: Create virtualized EventList component with TanStack Virtual</name>
  <files>frontend/src/components/EventList.tsx, frontend/src/components/EventList.css</files>
  <action>
Create EventList component using TanStack Virtual:

**EventList.tsx props:**
- events: RiskEvent[]
- selectedEventId: string | null
- onSelectEvent: (eventId: string) => void

**Implementation:**
- Use useRef for parent scrollable container
- Use useVirtualizer from @tanstack/react-virtual:
  - count: events.length
  - getScrollElement: () => parentRef.current
  - estimateSize: () => 120 (estimated card height in pixels)
  - overscan: 5 (render 5 extra items above/below viewport)
- Render only virtualizer.getVirtualItems() (not all events)
- Each virtual item renders EventCard component (create in next task)
- Parent container: height 100%, overflow-y auto
- Inner container: height virtualizer.getTotalSize(), position relative
- Virtual items: position absolute, transform translateY(virtualItem.start)

**EventList.css:**
- .event-list-container: height 100%, overflow-y auto, padding
- .event-list-inner: width 100%, position relative
- Smooth scrolling behavior

Sort events by risk_score descending BEFORE rendering (highest risk at top).
  </action>
  <verify>EventList renders, scrolling works, only visible items in DOM (inspect with React DevTools)</verify>
  <done>Virtualized list working, performance good with 1000+ events, items sorted by risk</done>
</task>

<task type="auto">
  <name>Task 4: Create EventCard component with moderate information density</name>
  <files>frontend/src/components/EventCard.tsx, frontend/src/components/EventCard.css</files>
  <action>
Create EventCard component displaying moderate density info:

**EventCard.tsx props:**
- event: RiskEvent
- isSelected: boolean
- onSelect: () => void

**Display (from CONTEXT.md moderate density):**
- Title (bold, 1-2 lines with ellipsis)
- Risk score badge (0-100, color-coded by range: 75-100 red, 50-74 orange, 25-49 yellow, 0-24 blue)
- Severity badge (SEV1-5, different styling from risk score, right-aligned)
- Timestamp (relative: "2 hours ago", use simple date logic or new Date().toLocaleString())
- Short summary (2-3 lines with ellipsis if longer)
- Source badge (small, bottom-left: GDELT, FRED, etc.)
- Sentiment indicator (positive/neutral/negative icon or color, bottom-right)

**Interaction:**
- onClick calls onSelect()
- isSelected adds selected styling (border, background highlight)
- Hover state (subtle background change)

**EventCard.css:**
- Card container: border, border-radius, padding 16px, margin-bottom 12px, cursor pointer
- Layout: CSS Grid or Flexbox for positioning badges
- Typography: clear hierarchy (title 16px, summary 14px, badges 12px)
- Color-coded badges using CSS variables from Dashboard.css
- Selected state: border-left 4px solid primary color, background slight highlight
- Hover state: background subtle change

Clean, minimal aesthetic. Plenty of whitespace. No clutter.
  </action>
  <verify>EventCard renders correctly, click selection works, styling matches Linear inspiration</verify>
  <done>Event cards display all required info, clean design, interactive selection works</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Split-view dashboard with virtualized event list and event cards</what-built>
  <how-to-verify>
1. Start dev servers (backend and frontend):
   - Terminal 1: `cd backend && python manage.py runserver`
   - Terminal 2: `cd frontend && npm run dev`
2. Visit: http://localhost:5173/ (or login if auth required)
3. Navigate to Dashboard page
4. Verify layout:
   - Split view: event list (left 60%), detail panel placeholder (right 40%)
   - Event list shows risk-prioritized events (highest risk at top)
5. Test event cards:
   - Each card shows: title, risk score, severity, timestamp, summary, source, sentiment
   - Cards are visually clean, good spacing, Linear-like aesthetic
   - Risk scores color-coded (red for high, blue for low)
6. Test virtualization:
   - Scroll through list - smooth performance
   - Open browser DevTools > Elements > inspect event list
   - Confirm only ~10-15 EventCard elements in DOM (not all events)
7. Test selection:
   - Click event card - card highlights
   - Right panel shows "Event details will appear here"
   - Click different card - selection moves
8. Check responsive behavior at different widths (should be readable, not perfect on mobile)
  </how-to-verify>
  <resume-signal>Type "approved" to continue, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run build succeeds
- [ ] Dashboard page renders split-view layout
- [ ] Event list uses TanStack Virtual (only visible items rendered)
- [ ] Event cards display all required information with clean styling
- [ ] Events sorted by risk_score descending
- [ ] Selection interaction works
- [ ] Human verification passed
</verification>

<success_criteria>
- All tasks completed
- Split-view dashboard layout implemented
- Virtualized event list renders only visible items
- Event cards show moderate density info (title, risk, severity, time, summary, source, sentiment)
- Clean, minimal design matching Linear inspiration
- Performance good with 1000+ events
- Selection interaction functional
- Human-verified visual quality
</success_criteria>

<output>
After completion, create `.planning/phases/05-dashboard-events-feed/05-02-SUMMARY.md`:

# Phase 5 Plan 2: Dashboard Layout & Event List Summary

**[One-line description of what shipped]**

## Accomplishments

- [Key outcome 1]
- [Key outcome 2]
- [Key outcome 3]

## Files Created/Modified

- `frontend/package.json` - Added @tanstack/react-virtual
- `frontend/src/pages/Dashboard.tsx` - Split-view dashboard layout
- `frontend/src/pages/Dashboard.css` - Dashboard styling
- `frontend/src/components/EventList.tsx` - Virtualized event list
- `frontend/src/components/EventList.css` - Event list styling
- `frontend/src/components/EventCard.tsx` - Event card component
- `frontend/src/components/EventCard.css` - Event card styling

## Decisions Made

[Styling choices, layout decisions, etc.]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 05-03-PLAN.md (Filtering & Search)
</output>
