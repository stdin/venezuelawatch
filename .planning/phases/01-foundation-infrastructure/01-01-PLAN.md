---
phase: 01-foundation-infrastructure
plan: 01
type: execute
---

<objective>
Set up Django 5.2 backend project with django-ninja API framework.

Purpose: Establish the backend foundation that all API endpoints will build upon.
Output: Working Django project with django-ninja configured, basic health check endpoint, ready for authentication and data pipeline development.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-phase.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-foundation-infrastructure/DISCOVERY.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Django project structure</name>
  <files>backend/manage.py, backend/venezuelawatch/settings.py, backend/venezuelawatch/urls.py, backend/venezuelawatch/__init__.py, backend/core/models.py, backend/requirements.txt, backend/.env.example</files>
  <action>
    Create backend/ directory. Run `django-admin startproject venezuelawatch backend/` to create Django project. Move into backend/ and create core app with `python manage.py startapp core`.

    Install packages: django==5.2.*, django-ninja==1.*, psycopg2-binary, python-dotenv, django-cors-headers.

    Create backend/requirements.txt with:
    - Django>=5.2,<5.3
    - django-ninja>=1.3
    - psycopg2-binary
    - python-dotenv
    - django-cors-headers
    - gunicorn (for production)

    Create backend/.env.example template with DATABASE_URL, SECRET_KEY, DEBUG placeholders. Add backend/.env to .gitignore.

    Update settings.py:
    - Import os, dotenv and load_dotenv()
    - Set SECRET_KEY from environment
    - Set DEBUG from environment (default False)
    - Add 'core' and 'corsheaders' to INSTALLED_APPS
    - Add corsheaders middleware BEFORE CommonMiddleware
    - Set CORS_ALLOWED_ORIGINS = ["http://localhost:5173"] for Vite dev server
    - Configure for PostgreSQL (will be implemented in Plan 03)
    - Set ALLOWED_HOSTS = ["localhost", "127.0.0.1"]
  </action>
  <verify>
    `python backend/manage.py check` passes without errors. requirements.txt exists with correct packages. .env.example exists as template.
  </verify>
  <done>Django project created, dependencies installed, settings configured with environment variables, CORS enabled for frontend.</done>
</task>

<task type="auto">
  <name>Task 2: Configure django-ninja API framework</name>
  <files>backend/venezuelawatch/api.py, backend/venezuelawatch/urls.py, backend/core/api.py</files>
  <action>
    Create backend/venezuelawatch/api.py as the main API entry point:
    ```python
    from ninja import NinjaAPI

    api = NinjaAPI(
        title="VenezuelaWatch API",
        version="1.0.0",
        description="Real-time intelligence platform for Venezuela events"
    )

    # Will add routers here in future phases
    ```

    Update backend/venezuelawatch/urls.py to include API:
    ```python
    from django.contrib import admin
    from django.urls import path
    from .api import api

    urlpatterns = [
        path("admin/", admin.site.urls),
        path("api/", api.urls),
    ]
    ```

    Create backend/core/api.py with a health router:
    ```python
    from ninja import Router

    router = Router()

    @router.get("/health")
    def health_check(request):
        return {"status": "ok", "service": "venezuelawatch"}
    ```

    Import and add the health router to backend/venezuelawatch/api.py:
    ```python
    from core.api import router as health_router
    api.add_router("/health", health_router)
    ```
  </action>
  <verify>
    Run `python backend/manage.py runserver 8000` in background. Curl `http://localhost:8000/api/health/health` returns {"status": "ok", "service": "venezuelawatch"}. Visit `http://localhost:8000/api/docs` shows auto-generated OpenAPI docs.
  </verify>
  <done>django-ninja configured, health check endpoint working, OpenAPI docs generated automatically.</done>
</task>

<task type="auto">
  <name>Task 3: Create development README</name>
  <files>backend/README.md, README.md</files>
  <action>
    Create backend/README.md with setup instructions:
    - Python 3.10+ required
    - Install dependencies: `pip install -r requirements.txt`
    - Copy .env.example to .env and configure
    - Run migrations: `python manage.py migrate`
    - Run dev server: `python manage.py runserver`
    - API docs at http://localhost:8000/api/docs

    Create root README.md with project overview:
    - VenezuelaWatch: SaaS intelligence platform
    - Monorepo structure (backend/, frontend/)
    - Link to backend/README.md and frontend/README.md (will be created in next plan)
    - GCP deployment (Cloud Run + Cloud SQL + Cloud Storage)
  </action>
  <verify>
    backend/README.md and root README.md exist with clear instructions.
  </verify>
  <done>Documentation created for local development setup.</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `python backend/manage.py check` passes
- [ ] `python backend/manage.py runserver` starts without errors
- [ ] Health check endpoint responds: `curl http://localhost:8000/api/health/health`
- [ ] OpenAPI docs visible at http://localhost:8000/api/docs
- [ ] requirements.txt has all needed packages
- [ ] .env.example template exists
- [ ] CORS configured for frontend origin
</verification>

<success_criteria>
- Django 5.2 project created and configured
- django-ninja API framework integrated
- Health check endpoint working
- OpenAPI documentation auto-generated
- CORS enabled for React frontend
- Development documentation complete
- All verification checks pass
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation-infrastructure/01-01-SUMMARY.md`
</output>
