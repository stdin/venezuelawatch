---
phase: 08-design-system-foundation
plan: 01
subsystem: design-tokens
tags: [css-variables, typography, oklch-colors, design-tokens]

# Dependency graph
requires:
  - phase: 07-ai-chat-interface
    provides: Complete v1.0 MVP with React frontend

provides:
  - CSS custom properties with typography scale (1.25 ratio)
  - OKLCH-based risk color palette with semantic tokens
  - Spacing and sizing scale tokens
  - Foundation for Storybook documentation (08-02)

affects: [frontend-styling, design-system, accessibility]
---

# Phase 8 Plan 1: Design Token Foundation

**Goal:** Establish CSS custom properties for typography (THE priority), risk-first colors using OKLCH, and spacing scales as the foundation of VenezuelaWatch's design system.

**Context:** User emphasized typography scale as the critical success factor for data scanning. Risk-first color system where colors communicate risk levels semantically (not decorative). Modern, accessible foundation built in from start. No Tailwind or Storybook currently installed - greenfield design system.

**Scope:** 3 tasks (standard depth)
1. Create typography scale with modular ratio
2. Create OKLCH risk color palette with semantic tokens
3. Create spacing/sizing scales and global CSS setup

**Checkpoint strategy:** Human verification after all tokens defined to verify visual hierarchy and contrast.

---

## Task 1: Create typography scale with 1.25 modular ratio

<files>
NEW: frontend/src/styles/tokens/typography.css
</files>

<action>
Create typography scale using 1.25 (Major Third) ratio - balanced for data applications per research.

**Requirements from CONTEXT.md:**
- Typography scale is THE critical success factor for data scanning
- Clear size hierarchy: headlines, body text, captions, metadata
- Makes scanning risk data effortless

**Implementation from RESEARCH.md:**
- Base size: 16px (1rem)
- Ratio: 1.25 (Major Third) - research shows 1.2-1.333 ideal for data apps
- Scale: 2xs → xs → sm (base) → md → lg → xl → 2xl
- Include font families (system font stack), weights, and line heights
- Use semantic naming pattern: --font-size-{size}, --font-weight-{weight}, --line-height-{purpose}

**File: frontend/src/styles/tokens/typography.css**
```css
/**
 * Typography Tokens
 *
 * Modular scale ratio: 1.25 (Major Third)
 * Base size: 16px (1rem)
 * Optimized for data scanning and risk intelligence clarity
 */

:root {
  /* --- Base Configuration --- */
  --font-base-size: 16px;
  --font-scale-ratio: 1.25;

  /* --- Font Size Scale --- */
  /* Ratio: 1.25^n where n is steps from base */
  --font-size-2xs: 0.64rem;   /* 10.24px - Fine print, metadata timestamps */
  --font-size-xs: 0.8rem;     /* 12.8px  - Labels, captions, table headers */
  --font-size-sm: 1rem;       /* 16px    - Body text (BASE), event descriptions */
  --font-size-md: 1.25rem;    /* 20px    - Small headings, card titles */
  --font-size-lg: 1.563rem;   /* 25px    - Section headings, page subtitles */
  --font-size-xl: 1.953rem;   /* 31.25px - Page headings, main titles */
  --font-size-2xl: 2.441rem;  /* 39.06px - Display text, dashboard hero */

  /* --- Font Families --- */
  /* System font stack for performance and consistency */
  --font-family-sans: ui-sans-serif, system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  --font-family-mono: ui-monospace, 'SF Mono', 'Fira Code', 'Cascadia Code', 'Roboto Mono', monospace;

  /* --- Font Weights --- */
  --font-weight-normal: 400;
  --font-weight-medium: 500;
  --font-weight-semibold: 600;
  --font-weight-bold: 700;

  /* --- Line Heights --- */
  /* Purpose-based for different content types */
  --line-height-tight: 1.2;     /* Headings, titles, condensed data */
  --line-height-normal: 1.5;    /* Body text, readable paragraphs */
  --line-height-relaxed: 1.75;  /* Long-form content, expanded readability */

  /* --- Letter Spacing --- */
  --letter-spacing-tight: -0.02em;  /* Large headings */
  --letter-spacing-normal: 0;       /* Body text */
  --letter-spacing-wide: 0.05em;    /* Uppercase labels, small text */
}
```

**Rationale:**
- 1.25 ratio creates subtle but clear hierarchy (not overwhelming like 1.618 golden ratio)
- 7 size steps cover all use cases: metadata → labels → body → headings → display
- System font stack for zero latency, consistent rendering
- Line heights optimized for purpose (tight for data, relaxed for reading)
</action>

<verify>
File created at frontend/src/styles/tokens/typography.css with:
- 7 font sizes from 2xs to 2xl using 1.25 ratio
- System font stacks for sans and mono
- 4 font weights (normal to bold)
- 3 line heights (tight, normal, relaxed)
- Clear comments explaining usage for data scanning

Verify scale feels balanced by checking ratio math:
- 2xs: 0.64rem = 1rem / 1.25^2 ✓
- xs: 0.8rem = 1rem / 1.25 ✓
- sm: 1rem (base) ✓
- md: 1.25rem = 1rem × 1.25 ✓
- lg: 1.563rem = 1rem × 1.25^2 ✓
</verify>

<done>
Typography scale established with 1.25 modular ratio optimized for data scanning. 7 size steps, system fonts, semantic naming. THE critical success factor per user priority.
</done>

---

## Task 2: Create OKLCH risk color palette with semantic tokens

<files>
NEW: frontend/src/styles/tokens/colors.css
</files>

<action>
Create risk-first color system using OKLCH color space for perceptually uniform colors with predictable contrast.

**Requirements from CONTEXT.md:**
- Risk-first color system where colors communicate risk levels semantically
- Red/yellow/green with semantic meaning
- Modern & accessible with readability built in

**Implementation from RESEARCH.md:**
- OKLCH color space for perceptual uniformity (not HSL/RGB)
- WCAG 4.5:1 contrast for text, target 5:1 for safety margin
- Layered tokens: primitives (--color-neutral-X, --color-risk-X) → semantic (--color-text-X, --color-bg-X)
- Dark theme support using data-theme attribute with adjusted lightness
- Semantic naming: purpose-based (--color-risk-high) not visual (--color-red-500)

**File: frontend/src/styles/tokens/colors.css**
```css
/**
 * Color Tokens
 *
 * Color space: OKLCH (perceptually uniform, predictable contrast)
 * Risk-first palette: Colors communicate risk levels semantically
 * Accessibility: WCAG 4.5:1 for text, 5:1 target for safety margin
 */

:root {
  /* --- Neutral Scale (Grayscale) --- */
  /* OKLCH format: oklch(lightness chroma hue) */
  /* Chroma = 0 for true grayscale */
  --color-neutral-50: oklch(0.985 0 0);   /* Near white */
  --color-neutral-100: oklch(0.97 0 0);   /* Very light gray */
  --color-neutral-200: oklch(0.922 0 0);  /* Light gray */
  --color-neutral-300: oklch(0.832 0 0);  /* Medium-light gray */
  --color-neutral-400: oklch(0.698 0 0);  /* Medium gray */
  --color-neutral-500: oklch(0.556 0 0);  /* Mid gray */
  --color-neutral-600: oklch(0.465 0 0);  /* Medium-dark gray */
  --color-neutral-700: oklch(0.354 0 0);  /* Dark gray */
  --color-neutral-800: oklch(0.27 0 0);   /* Very dark gray */
  --color-neutral-900: oklch(0.205 0 0);  /* Near black */
  --color-neutral-950: oklch(0.145 0 0);  /* Almost black */

  /* --- Risk Palette (Core Value: Risk Intelligence) --- */
  /* Lightness tuned for 4.5:1+ contrast on white background */

  /* Critical/High Risk - Red hue (27°) */
  --color-risk-critical: oklch(0.577 0.245 27.325);  /* Dark red, 4.5:1 on white */
  --color-risk-high: oklch(0.637 0.245 27.325);      /* Medium red */

  /* Medium Risk - Yellow/Orange hue (86°) */
  --color-risk-medium: oklch(0.795 0.184 86.047);    /* Golden yellow */

  /* Low Risk - Green hue (149°) */
  --color-risk-low: oklch(0.723 0.219 149.579);      /* Medium green */
  --color-risk-minimal: oklch(0.871 0.15 154.449);   /* Light green */

  /* Clean/No Risk - Neutral green */
  --color-risk-none: oklch(0.906 0.095 163.23);      /* Very light green */

  /* --- Semantic Text Colors --- */
  /* Purpose-based naming for different text roles */
  --color-text-primary: var(--color-neutral-900);    /* Main content */
  --color-text-secondary: var(--color-neutral-600);  /* Supporting text */
  --color-text-tertiary: var(--color-neutral-500);   /* De-emphasized text */
  --color-text-disabled: var(--color-neutral-400);   /* Disabled state */
  --color-text-inverse: var(--color-neutral-50);     /* Text on dark bg */

  /* --- Semantic Background Colors --- */
  --color-bg-page: var(--color-neutral-50);          /* Page background */
  --color-bg-surface: white;                         /* Card/panel background */
  --color-bg-elevated: var(--color-neutral-100);     /* Elevated surface (modals) */
  --color-bg-overlay: oklch(0.205 0 0 / 0.5);        /* Overlay with 50% opacity */

  /* --- Semantic Border Colors --- */
  --color-border-default: var(--color-neutral-300);  /* Standard borders */
  --color-border-strong: var(--color-neutral-400);   /* Emphasized borders */
  --color-border-subtle: var(--color-neutral-200);   /* De-emphasized borders */

  /* --- Semantic Interactive Colors --- */
  --color-interactive-primary: var(--color-risk-high);     /* Primary actions */
  --color-interactive-hover: var(--color-risk-critical);   /* Hover state */
  --color-interactive-disabled: var(--color-neutral-300);  /* Disabled state */
}

/* --- Dark Theme --- */
/* Adjust lightness component, preserve chroma and hue for consistent color perception */
[data-theme="dark"] {
  /* Inverted neutrals for dark background */
  --color-neutral-50: oklch(0.145 0 0);   /* Dark bg */
  --color-neutral-100: oklch(0.205 0 0);  /* Dark surface */
  --color-neutral-900: oklch(0.97 0 0);   /* Light text */

  /* Risk colors lightened for dark background (increase L, preserve C and H) */
  --color-risk-critical: oklch(0.704 0.191 22.216);  /* Lighter red */
  --color-risk-high: oklch(0.770 0.237 25.331);      /* Lighter red */
  --color-risk-medium: oklch(0.852 0.199 91.936);    /* Lighter yellow */
  --color-risk-low: oklch(0.792 0.209 151.711);      /* Lighter green */
  --color-risk-minimal: oklch(0.841 0.238 128.85);   /* Lighter green */

  /* Semantic tokens auto-adapt via neutral references */
  --color-bg-page: var(--color-neutral-50);
  --color-bg-surface: var(--color-neutral-100);
  --color-bg-overlay: oklch(0.97 0 0 / 0.3);
}
```

**Rationale:**
- OKLCH ensures colors feel consistent across risk levels (perceptually uniform)
- Risk palette is the primary color system (not decorative brand colors)
- Semantic tokens allow theme switching without component changes
- Dark theme adjusts only L (lightness), preserving color perception
- Contrast verified: critical/high reds are 4.5:1+ on white, lighter in dark mode
</action>

<verify>
File created at frontend/src/styles/tokens/colors.css with:
- 11 neutral grays (50-950) using OKLCH with chroma=0
- 6 risk colors (critical → none) using OKLCH with semantic red/yellow/green hues
- 15 semantic tokens for text/bg/border/interactive
- Dark theme with lightness-adjusted risk colors
- All colors use semantic naming (purpose-based, not visual)

Verify OKLCH syntax and contrast logic:
- Format: oklch(L C H) where L=0-1, C=0-0.4, H=0-360 ✓
- Risk critical lightness 0.577 should meet 4.5:1 on white ✓
- Dark theme increases lightness for visibility on dark bg ✓
</verify>

<done>
Risk-first color system created with OKLCH for perceptual uniformity. Semantic tokens enable theming. Dark mode support with lightness adjustment. Accessible contrast built in.
</done>

---

## Task 3: Create spacing/sizing scales and global CSS setup

<files>
NEW: frontend/src/styles/tokens/spacing.css
NEW: frontend/src/styles/global.css
MODIFY: frontend/src/main.tsx
</files>

<action>
Create spacing and sizing scale tokens, then set up global CSS that imports all token files and applies base styles.

**Requirements from CONTEXT.md:**
- Modern & accessible foundation
- No animations/motion yet (Phase 8 scope boundary)
- Foundation for Storybook documentation

**Implementation from RESEARCH.md:**
- Spacing scale: 0.25rem increments up to 1rem, then larger jumps
- Semantic naming: --spacing-{size}
- Global CSS imports all tokens and sets base styles
- Import in main.tsx entry point

**File: frontend/src/styles/tokens/spacing.css**
```css
/**
 * Spacing and Sizing Tokens
 *
 * Consistent spacing scale for margins, padding, gaps
 * Base unit: 0.25rem (4px) for fine-grained control
 */

:root {
  /* --- Spacing Scale --- */
  /* Fine control at small sizes, larger jumps at larger sizes */
  --spacing-0: 0;
  --spacing-2xs: 0.25rem;   /* 4px  - Tight spacing, icons */
  --spacing-xs: 0.5rem;     /* 8px  - Compact spacing */
  --spacing-sm: 0.75rem;    /* 12px - Small spacing */
  --spacing-md: 1rem;       /* 16px - Base spacing */
  --spacing-lg: 1.5rem;     /* 24px - Medium spacing */
  --spacing-xl: 2rem;       /* 32px - Large spacing */
  --spacing-2xl: 3rem;      /* 48px - Extra large spacing */
  --spacing-3xl: 4rem;      /* 64px - XXL spacing */

  /* --- Sizing Scale --- */
  /* For width/height constraints */
  --size-xs: 20rem;   /* 320px - Mobile viewport */
  --size-sm: 24rem;   /* 384px - Small container */
  --size-md: 28rem;   /* 448px - Medium container */
  --size-lg: 32rem;   /* 512px - Large container */
  --size-xl: 36rem;   /* 576px - XL container */
  --size-2xl: 42rem;  /* 672px - 2XL container */
  --size-3xl: 48rem;  /* 768px - 3XL container */
  --size-4xl: 56rem;  /* 896px - 4XL container */
  --size-5xl: 64rem;  /* 1024px - 5XL container */
  --size-6xl: 72rem;  /* 1152px - 6XL container */
  --size-7xl: 80rem;  /* 1280px - 7XL container */

  /* --- Border Radius --- */
  --radius-none: 0;
  --radius-sm: 0.125rem;  /* 2px  - Subtle rounding */
  --radius-md: 0.375rem;  /* 6px  - Standard rounding */
  --radius-lg: 0.5rem;    /* 8px  - Pronounced rounding */
  --radius-xl: 0.75rem;   /* 12px - Large rounding */
  --radius-2xl: 1rem;     /* 16px - XL rounding */
  --radius-full: 9999px;  /* Full circle/pill */

  /* --- Shadows (subtle for modern aesthetic) --- */
  --shadow-sm: 0 1px 2px 0 oklch(0.205 0 0 / 0.05);
  --shadow-md: 0 4px 6px -1px oklch(0.205 0 0 / 0.1), 0 2px 4px -2px oklch(0.205 0 0 / 0.1);
  --shadow-lg: 0 10px 15px -3px oklch(0.205 0 0 / 0.1), 0 4px 6px -4px oklch(0.205 0 0 / 0.1);
  --shadow-xl: 0 20px 25px -5px oklch(0.205 0 0 / 0.1), 0 8px 10px -6px oklch(0.205 0 0 / 0.1);
}
```

**File: frontend/src/styles/global.css**
```css
/**
 * Global Styles
 *
 * Imports all design tokens and applies base styles
 * Entry point for VenezuelaWatch design system
 */

/* --- Design Token Imports --- */
@import './tokens/typography.css';
@import './tokens/colors.css';
@import './tokens/spacing.css';

/* --- CSS Reset & Base Styles --- */
*,
*::before,
*::after {
  box-sizing: border-box;
  margin: 0;
  padding: 0;
}

html {
  /* Set default theme (light), can be overridden by data-theme attribute */
  font-size: var(--font-base-size);
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

body {
  font-family: var(--font-family-sans);
  font-size: var(--font-size-sm);
  font-weight: var(--font-weight-normal);
  line-height: var(--line-height-normal);
  color: var(--color-text-primary);
  background-color: var(--color-bg-page);
}

/* --- Typography Base Styles --- */
h1, h2, h3, h4, h5, h6 {
  font-weight: var(--font-weight-semibold);
  line-height: var(--line-height-tight);
  color: var(--color-text-primary);
}

h1 { font-size: var(--font-size-2xl); }
h2 { font-size: var(--font-size-xl); }
h3 { font-size: var(--font-size-lg); }
h4 { font-size: var(--font-size-md); }
h5 { font-size: var(--font-size-sm); }
h6 { font-size: var(--font-size-xs); }

p {
  margin-bottom: var(--spacing-md);
}

a {
  color: var(--color-interactive-primary);
  text-decoration: none;
}

a:hover {
  color: var(--color-interactive-hover);
  text-decoration: underline;
}

code, pre {
  font-family: var(--font-family-mono);
  font-size: 0.9em;
}

/* --- Utility Classes --- */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}
```

**Modify: frontend/src/main.tsx**
Import global.css at the very top (before any component imports):

```typescript
import './styles/global.css'  // <-- ADD THIS LINE at the top
import { StrictMode } from 'react'
import { createRoot } from 'react-dom/client'
import App from './App.tsx'

createRoot(document.getElementById('root')!).render(
  <StrictMode>
    <App />
  </StrictMode>,
)
```
</action>

<verify>
Files created:
1. frontend/src/styles/tokens/spacing.css with spacing (9 steps), sizing (13 steps), border radius (6 steps), shadows (4 levels)
2. frontend/src/styles/global.css with token imports, CSS reset, typography base styles, utility classes
3. frontend/src/main.tsx modified to import global.css first

Verify directory structure created:
```
frontend/src/styles/
├── tokens/
│   ├── typography.css
│   ├── colors.css
│   └── spacing.css
└── global.css
```

Verify import order in global.css:
- Typography → Colors → Spacing (no dependencies between them) ✓
- All token files imported before base styles ✓

Verify main.tsx import:
- global.css imported before React/App ✓
</verify>

<done>
Spacing/sizing scales created with consistent increments. Global CSS set up with all token imports, base styles, and typography defaults. Design token foundation complete, ready for Storybook documentation (Plan 08-02).
</done>

---

## Checkpoint: Human Verification

**Type:** checkpoint:human-verify

**What to verify:**
1. **Typography hierarchy:** Open browser dev tools on http://localhost:5173, inspect typography scale in Elements panel. Check that --font-size-* CSS variables are defined and scale feels balanced (not too aggressive).

2. **Risk color contrast:** In dev tools, verify risk color OKLCH values. Critical/high should be dark enough for readability on white. Semantic tokens should reference primitive tokens correctly.

3. **Visual check:** Refresh the app. Existing pages may look different (new base styles applied). Verify no broken layouts, text is readable, spacing feels consistent.

4. **Dark theme test (optional):** In console, run `document.documentElement.dataset.theme = 'dark'` to verify dark theme colors load. Then reset with `delete document.documentElement.dataset.theme`.

**Success criteria:**
- All CSS token files exist in frontend/src/styles/tokens/
- global.css imports all tokens and sets base typography
- main.tsx imports global.css
- App loads without console errors
- Typography scale feels balanced for data scanning
- Risk colors are readable and semantically meaningful

**On failure:**
- Report which verification step failed (typography, colors, layout, console errors)
- Provide console output or screenshot if helpful

---

**Plan complete.** Design token foundation established with typography (THE priority), risk-first OKLCH colors, and spacing scales. Ready for Storybook setup in Plan 08-02.
