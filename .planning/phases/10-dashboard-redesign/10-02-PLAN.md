---
phase: 10-dashboard-redesign
plan: 02
type: execute
---

<objective>
Redesign Events Feed components with Mantine UI and skeleton loading states.

Purpose: Replace custom CSS-styled EventList and EventCard with Mantine components for professional appearance and consistent design system. Add skeleton loading states for better UX during data fetching.
Output: EventList and EventCard components rebuilt using Mantine Card, Text, Badge, and Skeleton components with professional styling.
</objective>

<execution_context>
~/.claude/get-shit-done/workflows/execute-phase.md
./summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/10-dashboard-redesign/10-RESEARCH.md
@.planning/phases/10-dashboard-redesign/10-01-SUMMARY.md
@.planning/phases/09-component-library/09-02-SUMMARY.md
@frontend/src/components/EventList.tsx
@frontend/src/components/EventList.css
@frontend/src/components/EventCard.tsx
@frontend/src/components/EventCard.css
@frontend/src/components/ui/Card/Card.tsx

**Tech stack available:**
- Mantine UI: Card, Text, Badge, Group, Stack, Skeleton
- @tanstack/react-virtual for virtualized list (already installed)
- React Query for loading states (installed in 10-01)

**Established patterns:**
- Phase 9: Use Mantine components, wrap if needed
- Phase 6: Virtualized lists with @tanstack/react-virtual
- Phase 5: Event cards show title, source, risk score, severity, timestamp

**Constraining decisions:**
- Phase 9: Mantine components for all UI (no custom Tailwind)
- Phase 4: Risk scores 0-100 scale with color coding
- Phase 4: Severity badges SEV1-5 with colors

**From RESEARCH.md:**
- Skeleton loading pattern for perceived performance
- Use Mantine Stack for vertical spacing
- Use Mantine Badge for risk scores and severity
- Don't hand-roll card components (use Mantine Card)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rebuild EventCard with Mantine components</name>
  <files>frontend/src/components/EventCard.tsx</files>
  <action>Replace custom CSS-styled event card with Mantine Card component. Import Card, Text, Badge, Group, Stack from @mantine/core. Use Card as wrapper with padding="md" and withBorder. Use Stack for vertical spacing of card content (title, metadata, risk indicators). Use Group for horizontal layout of badges (severity, risk score). Use Text component with size and weight props for title (size="sm", weight={700}) and metadata (size="xs", c="dimmed"). Use Badge for severity (color based on SEV level: SEV1=red, SEV2=orange, SEV3=yellow, SEV4=blue, SEV5=gray) and risk score (color based on value: >70=red, 50-70=orange, <50=blue). Replace event-card CSS classes with Mantine component props. Keep click handler and selected state styling (use Card's onClick and style={{ backgroundColor: selected ? 'var(--mantine-color-blue-light)' : undefined }}). Remove EventCard.css imports.</action>
  <verify>npm run dev starts, Dashboard shows event cards with Mantine styling, clicking card selects it with blue background</verify>
  <done>EventCard uses Mantine Card/Text/Badge/Group/Stack, no custom CSS, severity and risk score badges color-coded correctly, click selection works</done>
</task>

<task type="auto">
  <name>Task 2: Rebuild EventList with skeleton loading states</name>
  <files>frontend/src/components/EventList.tsx</files>
  <action>Refactor EventList to use Mantine components and add skeleton loading states. Import Stack, Skeleton from @mantine/core. When loading=true (from parent), render 5 skeleton cards using Skeleton component wrapped in Card: <Card><Stack><Skeleton height={20} width="80%" /><Skeleton height={14} width="60%" /><Skeleton height={14} width="40%" /></Stack></Card>. This creates placeholder cards that match EventCard structure during loading. Keep existing @tanstack/react-virtual virtualization logic (don't remove). Replace eventlist-container and event-list CSS classes with Mantine Stack component (spacing="sm"). Remove EventList.css imports. The skeleton pattern provides instant visual feedback during 60-second polling updates from Phase 5.</action>
  <verify>npm run dev starts, Dashboard shows 5 skeleton cards during initial load, then real event cards after data loads</verify>
  <done>EventList shows skeleton loading placeholders, virtualization still works, no custom CSS, smooth transition from skeleton to real cards</done>
</task>

<task type="auto">
  <name>Task 3: Update Dashboard to handle loading states</name>
  <files>frontend/src/pages/Dashboard.tsx</files>
  <action>Update Dashboard component to pass loading prop to EventList and remove old loading state divs. Pass loading={loading && !events} to EventList component so skeletons show during initial load. Remove the manual loading-state div (<div className="loading-state">Loading events...</div>). Remove the loading-overlay div for polling updates - EventList skeletons will handle this automatically. Keep error state and empty state divs (these are distinct from loading). This delegates loading UX to EventList skeletons per research best practices.</action>
  <verify>npm run dev starts, Dashboard shows skeleton cards during load, transitions to real events, no old "Loading events..." text</verify>
  <done>Dashboard passes loading prop to EventList, skeleton states show during data fetch, old loading divs removed, error/empty states preserved</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] npm run dev starts without errors
- [ ] Dashboard shows 5 skeleton cards on initial load
- [ ] Skeleton cards transition to real event cards after API response
- [ ] Event cards use Mantine Card with proper styling
- [ ] Severity badges color-coded (SEV1=red, SEV2=orange, etc.)
- [ ] Risk score badges color-coded (>70=red, 50-70=orange, <50=blue)
- [ ] Clicking event card selects it (blue background)
- [ ] Virtualized scrolling still works for long lists
- [ ] No console errors
- [ ] No custom CSS files imported
</verification>

<success_criteria>

- EventCard rebuilt with Mantine components
- EventList shows skeleton loading states
- All custom CSS removed (EventCard.css, EventList.css)
- Color-coded badges working (severity, risk score)
- Event selection interaction preserved
- Virtualization still functional
- No TypeScript errors
  </success_criteria>

<output>
After completion, create `.planning/phases/10-dashboard-redesign/10-02-SUMMARY.md`:

# Phase 10 Plan 2: Events Feed Redesign Summary

**[Substantive one-liner - what shipped]**

## Accomplishments

- [Key outcomes]

## Files Created/Modified

- `frontend/src/components/EventCard.tsx` - Description
- `frontend/src/components/EventList.tsx` - Description
- `frontend/src/pages/Dashboard.tsx` - Description

## Decisions Made

[Key decisions and rationale, or "None"]

## Issues Encountered

[Problems and resolutions, or "None"]

## Next Step

Ready for 10-03-PLAN.md (Data Visualization with Recharts)
</output>
